                ┌────────────────────────┐
                │        LOGIN            │
                └────────────────────────┘
                         │
                         ▼
                ┌────────────────────────┐
                │ Usuário envia           │
                │ accountNumber + senha   │
                └────────────────────────┘
                         │
              Senha válida? ──► Não ──► ❌ Erro (401)
                         │ Sim
                         ▼
                ┌────────────────────────┐
                │ Gera JWT + refToken     │
                │ Salva refToken no banco │
                └────────────────────────┘
                         │
                         ▼
                ✔ Retorna token p/ cliente


──────────────────────────────────────────────────────────────

           TODA REQUISIÇÃO PROTEGIDA (recarga / transferência)
──────────────────────────────────────────────────────────────
                         │
                         ▼
                ┌────────────────────────┐
                │ Cliente envia JWT       │
                │ Authorization: Bearer   │
                └────────────────────────┘
                         │
              Token válido? ──► Não ──► ❌ Erro (401)
                         │ Sim
                         ▼
         refToken existe no banco? ──► Não ──► ❌ Sessão inválida
                         │ Sim
                         ▼
                ✔ Permite operação

──────────────────────────────────────────────────────────────

                    RECARGA (saldo +)
──────────────────────────────────────────────────────────────
                         │
                         ▼
                ┌────────────────────────┐
                │ Inicia transação MySQL  │
                │ Atualiza saldo + valor  │
                │ Registra no histórico   │
                └────────────────────────┘
                         │
                         ▼
                ✔ Commit (sucesso)

──────────────────────────────────────────────────────────────

                 TRANSFERÊNCIA (saldo - / +)
──────────────────────────────────────────────────────────────
                         │
                         ▼
                Conta destino existe? ──► Não ──► ❌ Erro
                         │ Sim
                         ▼
                Saldo origem >= valor? ──► Não ──► ❌ Saldo insuf.
                         │ Sim
                         ▼
                ┌────────────────────────┐
                │ Inicia transação MySQL  │
                │ Debita origem           │
                │ Credita destino         │
                │ Registra histórico      │
                └────────────────────────┘
                         │
                         ▼
                ✔ Commit (sucesso)

──────────────────────────────────────────────────────────────

                      LOGOUT
──────────────────────────────────────────────────────────────
                         │
                         ▼
                ┌────────────────────────┐
                │ Remove refToken do banco│
                └────────────────────────┘
                         │
                         ▼
                ✔ Sessão expirada
